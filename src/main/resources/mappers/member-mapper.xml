<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.nextit.ditto.member.MemberMapper">

    <resultMap id="memberResultMap" type="kr.or.nextit.ditto.member.MemberVO">
        <id property="memberNo" column="MEMBER_NO"/>
        <result property="memberId" column="MEMBER_ID"/>
        <result property="memberName" column="MEMBER_NAME"/>
        <result property="memberNickname" column="MEMBER_NICKNAME"/>
        <result property="memberPw" column="MEMBER_PW"/>
        <result property="memberSub" column="MEMBER_SUB"/>
        <result property="memberTel" column="MEMBER_TEL"/>
        <result property="memberAdd" column="MEMBER_ADD"/>
        <result property="memberBirth" column="MEMBER_BIRTH"/>
        <result property="memberCard" column="MEMBER_CARD"/>
        <result property="memberAdmin" column="MEMBER_ADMIN"/>
        <result property="memberLog" column="MEMBER_LOG"/>
        <result property="memberDelete" column="MEMBER_DELETE"/>
        <result property="memberDetailAdd" column="MEMBER_DETAILADD"/>
        <result property="memberPostcode" column="MEMBER_POSTCODE"/>
    </resultMap>

    <!--  로그인용   -->
    <select id="findMember" parameterType="memberVO" resultType="memberVO">
        SELECT
                *
        FROM
            MEMBER A
        WHERE
            A.MEMBER_ID = #{memberId}
            AND A.MEMBER_PW = #{memberPw}
    </select>

    <!-- 회원가입용   -->
    <insert id="signup" parameterType="memberVO">
        INSERT INTO
        MEMBER
        (
            MEMBER_ID,
            MEMBER_NAME,
            MEMBER_NICKNAME,
            MEMBER_PW,
            MEMBER_TEL,
            MEMBER_POSTCODE,
            MEMBER_ADD,
            MEMBER_DETAILADD,
            MEMBER_BIRTH
        ) VALUES (
            #{memberId},
            #{memberName},
            #{memberNickname},
            #{memberPw},
            #{memberTel},
            #{memberPostcode},
            #{memberAdd},
            #{memberDetailAdd},
            #{memberBirth}
        )
    </insert>

    
    <!--  회원가입 아이디 중복 체크용   -->
    <select id="checkIdIsDuplicated" parameterType="String" resultType="int">
        SELECT
            COUNT(*)
        FROM
            MEMBER A
        WHERE
            A.MEMBER_ID = #{memberId}

    </select>

    <!-- 회원가입 닉네임 중복 체크용 -->
    <select id="checkNicknameIsDuplicated" parameterType="String" resultType="int">
        SELECT
              COUNT(*)
        FROM
               MEMBER A
        WHERE
              A.MEMBER_NICKNAME = #{memberNickname}

    </select>


    <!--  마이페이지 확인용   -->
    <select id="searchMemberInfo" parameterType="String" resultType="memberVO">
        SELECT
            *
        FROM
            MEMBER A
        WHERE
            A.MEMBER_ID = #{memberId}
    </select>

    <update id="passwordChange" parameterType="String">
        UPDATE
            MEMBER A
        SET
            A.MEMBER_PW = #{memberPw}
        WHERE
            A.MEMBER_ID = #{memberId}
    </update>
</mapper>